<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro Completo - Frete Gr√°tis</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="./src/cadastro.css"> 
</head>
<body>
    <div class="container-cadastro">
        <header class="cadastro-header">
            <h1>üéâ Cadastro para Frete Gr√°tis</h1>
            <p>Preencha seus dados para garantir a isen√ß√£o de **R$ 5.000,00** no frete da sua compra.</p>
        </header>

        <form id="form-cadastro" class="form-cadastro">
            
            <div class="form-group">
                <label for="nome">Nome Completo</label>
                <input type="text" id="nome" name="nome" placeholder="Seu nome completo" required>
            </div>
            
            <div class="form-group">
                <label for="email">E-mail</label>
                <input type="email" id="email" name="email" placeholder="seu.email@exemplo.com" required>
            </div>
            
            <div class="form-group">
                <label for="celular">N√∫mero de Celular</label>
                <input type="tel" id="celular" name="celular" placeholder="(XX) 9XXXX-XXXX" title="Formato: (XX) XXXXX-XXXX" required>
            </div>
            
            <div class="form-group">
                <label for="cpf">CPF</label>
                <input type="text" id="cpf" name="cpf" placeholder="000.000.000-00" title="Formato: 000.000.000-00" required>
            </div>
            
            <div class="form-group">
                <label for="senha">Criar Senha</label>
                <input type="password" id="senha" name="senha" required>
            </div>
            
            <button type="submit" class="btn-finalizar-cadastro">
                Finalizar Cadastro e Aplicar Frete Gr√°tis
            </button>
        </form>

        <a id="link-voltar" href="catalogo.html" class="link-voltar">Voltar para a p√°gina de Pagamento</a>
    </div>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const formCadastro = document.getElementById('form-cadastro');
        const linkVoltar = document.getElementById('link-voltar');
        
        // Pega os par√¢metros do ve√≠culo da p√°gina de pagamento
        const params = new URLSearchParams(window.location.search);
        const nomeCarro = params.get('nome');
        const valorCarro = params.get('valor');

        const paginaPagamentoUrl = `pagamento.html?nome=${encodeURIComponent(nomeCarro || '')}&valor=${valorCarro || 0}`;

        // Define o link de volta inicial (caso o usu√°rio cancele o cadastro)
        linkVoltar.href = paginaPagamentoUrl;


        // --- Fun√ß√µes de Mascaramento (Melhorando a UX) ---
        // (mantidas as m√°scaras de CPF e Celular)

        document.getElementById('cpf').oninput = function() {
            let cpf = this.value.replace(/\D/g, ''); 
            cpf = cpf.replace(/(\d{3})(\d)/, '$1.$2');
            cpf = cpf.replace(/(\d{3})(\d)/, '$1.$2');
            cpf = cpf.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
            this.value = cpf.substring(0, 14);
        };

        document.getElementById('celular').oninput = function() {
            let celular = this.value.replace(/\D/g, '');
            celular = celular.replace(/^(\d{2})(\d)/g,"($1) $2"); 
            celular = celular.replace(/(\d{5})(\d{4})$/,"$1-$2"); 
            this.value = celular.substring(0, 15);
        };


        // --- L√≥gica de Submiss√£o do Formul√°rio ---
        formCadastro.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const nome = document.getElementById('nome').value;
            
            // ***********************************************
            // NOVO: SALVA O STATUS NO LOCALSTORAGE ANTES DE REDIRECIONAR
            localStorage.setItem('freteGratisAplicado', 'true'); 
            // ***********************************************
            
            alert(`Cadastro de ${nome} conclu√≠do com sucesso! Voc√™ ganhou Frete Gr√°tis!`);
            
            // Redireciona de volta para a p√°gina de pagamento, que agora ler√° o status do localStorage.
            window.location.href = paginaPagamentoUrl; 
        });
    });
</script>
 <div class="ai-assistant-container" aria-label="Assistente de Intelig√™ncia Artificial">
        <div class="ai-icon">
            ü§ñ
        </div>
    </div>
    <div class="ai-assistant-container" aria-label="Assistente de Intelig√™ncia Artificial Turbo Auto Car">
    <div class="ai-icon" id="ai-toggle"></div> 

    <div class="ai-chat-window" id="ai-window">
        <div class="chat-header">
            <h4>Assistente Turbo Auto Car üöó</h4>
            <span class="close-btn">&times;</span>
        </div>
        <div class="chat-body">
            <p class="message bot-message">Ol√°! Sou seu assistente virtual. Como posso te ajudar hoje?</p>
            </div>
        <div class="chat-footer">
            <input type="text" placeholder="Digite sua mensagem...">
            <button>Enviar</button>
        </div>
    </div>
</div>

<script src="./src/ai-script.js"></script>
    
</body>
</html>